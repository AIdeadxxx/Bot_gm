# Telegram Gemini Bot

Телеграм-бот, который работает в групповых чатах и отвечает на запросы с помощью Google Gemini API, когда его упоминают.

## Возможности

- Работа в групповых чатах
- Реагирование только на упоминания (@имя_бота)
- Генерация ответов с помощью Google Gemini API
- Возможность работы в конкретной теме (ветке) группы
- Настраиваемый системный промпт для AI
- Возможность запуска на локальном компьютере через ngrok

## Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/your-username/telegram-gemini-bot.git
cd telegram-gemini-bot
```

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Создайте файл `.env` в корневой директории проекта и заполните его:
```
# Токен для Telegram бота
TELEGRAM_TOKEN=your_telegram_token_here

# API ключ Google Gemini
GEMINI_API_KEY=your_gemini_api_key_here

# Имя бота (без символа @)
BOT_NAME=GeminiBot

# Настройки для работы в конкретной теме (необязательно)
GROUP_ID=123456789  # ID группы
TOPIC_ID=987654321  # ID темы

# Модель Gemini
GEMINI_MODEL=gemini-1.5-flash

# Настройки генерации
MAX_TOKENS=2000
TEMPERATURE=0.7

# Системный промпт (инструкция для AI)
SYSTEM_PROMPT=Ты - полезный и дружелюбный ассистент в групповом чате Telegram...
```

## Как получить токены и ID

### Telegram Bot Token
1. Откройте [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. Скопируйте полученный токен в `.env` файл

### Google Gemini API Key
1. Зарегистрируйтесь на [AI Studio от Google](https://aistudio.google.com/)
2. Создайте API ключ в разделе [API Keys](https://aistudio.google.com/app/apikey)
3. Скопируйте ключ в `.env` файл

### Получение ID группы и темы
1. Добавьте бота в группу
2. Отправьте команду `/json` в нужной теме
3. В ответе найдите `chat.id` (ID группы) и `message_thread_id` (ID темы)
4. Запишите эти значения в файл `.env`

## Запуск бота

```
python bot.py
```

## Команды бота

- `/start` - Начать работу с ботом
- `/help` - Показать справку по командам
- `/json` - Показать JSON данные сообщения

## Настройка системного промпта

Системный промпт - это инструкция для AI модели, которая определяет, как бот будет отвечать на запросы. Вы можете настроить поведение бота, изменив системный промпт в файле `.env` (переменная `SYSTEM_PROMPT`).

Пример промпта:
```
Ты - полезный и дружелюбный ассистент в групповом чате Telegram.
Твоя задача - помогать пользователям, отвечая на их вопросы информативно и точно.

Правила общения:
1. Отвечай кратко и по существу
2. Избегай длинных введений и заключений
3. Всегда будь вежливым и дружелюбным
4. Если не знаешь ответа, честно признайся
```

## Настройка ngrok для локального запуска

1. Установите и настройте [ngrok](https://ngrok.com/)
2. Запустите ngrok для создания туннеля:
```
ngrok http 8080  # Порт может отличаться, в зависимости от настроек вашего бота
```

## Структура проекта

```
telegram-gemini-bot/
├── bot.py                 # Основной код бота
├── gemini.py             # Логика общения с Gemini API
├── config.py             # Конфигурация (токены и имя бота)
├── requirements.txt      # Список зависимостей
├── .env                  # Секретные ключи
└── README.md             # Описание проекта
```

## Использование

1. Добавьте бота в групповой чат
2. Упомяните бота с запросом: `@GeminiBot какой сегодня день?`
3. Бот ответит на ваш запрос, используя Google Gemini API

## Лицензия

MIT 